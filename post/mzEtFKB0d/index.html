<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<title>
    ğŸ³å°å’¸é±¼-è‡ªå·±çš„å¿ƒæƒ…
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="å°å’¸é±¼-webçŸ¥è¯†åˆ†äº«">
<meta name="description" content="The only dream and a good girl in the world, not fail! ">
<meta name="keywords" content="My own mood">
<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<link rel="stylesheet" href="https://lingtin.github.io/styles/main.css" />
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.7.1/jquery.min.js"></script>

        <link rel="stylesheet" href="/assets/media/css/style.min.css" />
        <script src="/assets/media/script/tocbot.min.js"></script>
        <script src="/assets/media/script/script.min.js"></script>
        <script src="/assets/media/script/icon.min.js"></script>
        
            <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/Card/prism.min.js"></script>
            <link rel="stylesheet" href="" />
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
            <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js"></script>
            
                <!--ç‚¹å‡»ç‰¹æ•ˆ-->
                <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js"></script>
                
                    <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic@latest/assets/media/script/APlayer.min.js"></script>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
                    
                        <!--CDNæ ·å¼-->
                        <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/hit-kounter-lc-0.3.0.js"></script>
                        <script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
                        
                            <script>
                                (function() {
                                    var bp = document.createElement('script');
                                    var curProtocol = window.location.protocol.split(':')[0];
                                    if (curProtocol === 'https') {
                                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                                    } else {
                                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                                    }
                                    var s = document.getElementsByTagName("script")[0];
                                    s.parentNode.insertBefore(bp, s);
                                })();
                            </script>
                            
                                <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156097411-1"></script>
                                <script>
                                    window.dataLayer = window.dataLayer || [];

                                    function gtag() {
                                        dataLayer.push(arguments);
                                    }
                                    gtag('js', new Date());
                                    gtag('config', 'UA-156097411-1');
                                </script>
                                
</head>

<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo">
                <a href="https://lingtin.github.io">
                    ğŸ³å°å’¸é±¼-è‡ªå·±çš„å¿ƒæƒ…
                </a>
            </div>
            <div id="tp-weather-widget"></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/">
                        é¦–é¡µ
                    </a>
                    
                    <a class="menu-item" href="/posts/">
                        æ–‡ç« 
                    </a>
                    
                    <a class="menu-item" href="/archives">
                        å½’æ¡£
                    </a>
                    
                    <a class="menu-item" href="/friends/">
                        å‹é“¾
                    </a>
                    
                    <a class="menu-item" href="/post/doc/">
                        æ–‡æ¡£
                    </a>
                    
                    <a class="menu-item" href="/post/about">
                        å…³äº
                    </a>
                    
                        <input id="switch_default" type="checkbox" class="switch_default">
                        <label for="switch_default" class="toggleBtn"></label>
            </div>
            <form id="gridea-search-form" data-update="1597977814576" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
            </form>
        </div>
    </nav>

    
        <nav class="navbar-mobile" id="nav-mobile">
            <div class="container">
                <div class="navbar-header">
                    <div>
                        <a href="https://lingtin.github.io">
                            ğŸ³å°å’¸é±¼-è‡ªå·±çš„å¿ƒæƒ…
                        </a>
                        <!--en-->
                        <a id="mobile-toggle-theme-en" class="a en">&nbsp;Dark</a>
                        <!--zh-->
                        <a id="mobile-toggle-theme-zh" class="a zh">&nbsp;&#x6697;&#x9ED1;</a>
                    </div>
                    <form id="gridea-search-form" data-update="1597977814576" action="/search/index.html">
                        <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
                    </form>
                    <!--en-->
                    <div class="menu-toggle" id="menu-toggle-en" onclick="mobileBtn()">&#9776; Menu</div>
                    <!--zh-->
                    <div class="menu-toggle" id="menu-toggle-zh" onclick="mobileBtn()">&#9776; &#x83DC;&#x5355;</div>

                </div>
                <div class="menu" id="mobile-menu">
                    
                        <a class="menu-item" href="/">
                            é¦–é¡µ
                        </a>
                        
                        <a class="menu-item" href="/posts/">
                            æ–‡ç« 
                        </a>
                        
                        <a class="menu-item" href="/archives">
                            å½’æ¡£
                        </a>
                        
                        <a class="menu-item" href="/friends/">
                            å‹é“¾
                        </a>
                        
                        <a class="menu-item" href="/post/doc/">
                            æ–‡æ¡£
                        </a>
                        
                        <a class="menu-item" href="/post/about">
                            å…³äº
                        </a>
                        
                </div>
            </div>
        </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementById("menu-toggle-en");
        var toggleMenu_zh = document.getElementById("menu-toggle-zh");

        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.display != "none") {
            if (toggleMenu.classList.contains("active")) {
                toggleMenu.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu.classList.add("active")
                mobileMenu.classList.add("active")
            }
        } else if (toggleMenu_zh.display != "none") {
            if (toggleMenu_zh.classList.contains("active")) {
                toggleMenu_zh.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu_zh.classList.add("active")
                mobileMenu.classList.add("active")
            }
        }

    }
</script>



    <script>
        (function(a, h, g, f, e, d, c, b) {
            b = function() {
                d = h.createElement(g);
                c = h.getElementsByTagName(g)[0];
                d.src = e;
                d.charset = "utf-8";
                d.async = 1;
                c.parentNode.insertBefore(d, c)
            };
            a["SeniverseWeatherWidgetObject"] = f;
            a[f] || (a[f] = function() {
                (a[f].q = a[f].q || []).push(arguments)
            });
            a[f].l = +new Date();
            if (a.attachEvent) {
                a.attachEvent("onload", b)
            } else {
                a.addEventListener("load", b, false)
            }
        }(window, document, "script", "SeniverseWeatherWidget", "//cdn.sencdn.com/widget2/static/js/bundle.js?t=" + parseInt((new Date().getTime() / 100000000).toString(), 10)));
        window.SeniverseWeatherWidget('show', {
            flavor: "slim",
            location: "WWEFQFPJZ7T8",
            geolocation: true,
            language: "auto",
            unit: "c",
            theme: "auto",
            token: "61bcc333-3305-4728-9465-6785274bb0a3",
            hover: "enabled",
            container: "tp-weather-widget"
        })
    </script>
    
            <div class="main">
                <div class="container">
                    <article class="post-wrap">
                        <header class="post-header">
                            <h1 class="post-title">
                                NodeJSè¿›ç¨‹ç®¡ç†å™¨pm2
                            </h1>
                            
                                    <!--zh-->
                                    <div class="post-meta zh">
                                        &#x4F5C;&#x8005;:
                                        <a itemprop="author" rel="author" href="/">
                                            ğŸ³å°å’¸é±¼-è‡ªå·±çš„å¿ƒæƒ…
                                        </a>
                                        <span class="post-time">&#x65E5;&#x671F;: <a href="#">2019-06-12</a></span>
                                        <span class="post-readtime">&#x9605;&#x8BFB;&#x65F6;&#x95F4;:<a
                                    href="#">12.3
                                    &#x5206;&#x949F;</a></span>
                                        <span class="post-words">&#x5B57;&#x6570;:<a href="#">3109</a></span>
                                        
                                            <span class="post-category">&#x5206;&#x7C7B;:
                                
                                <a href="https://lingtin.github.io/tag/2PLgaq7l7/">nodejs</a>
                                
                                <a href="https://lingtin.github.io/tag/xd5TVJ9ej/">contos</a>
                                
                            </span>
                                            
                                                é˜…è¯»é‡:
                                                <span data-hk-page="current"> - </span>
                                                
                                    </div>
                                    
                        </header>
                        
                            <img class="post-feature-image" src="https://lingtin.github.io/post-images/mzEtFKB0d.png" alt="">
                          
                        <div class="post-content">
                            <p><strong>pm2æ˜¯ä¸€ä¸ªå¸¦æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„Nodeåº”ç”¨çš„è¿›ç¨‹ç®¡ç†å™¨ã€‚å½“ä½ è¦æŠŠä½ çš„ç‹¬ç«‹ä»£ç åˆ©ç”¨å…¨éƒ¨çš„æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰CPUï¼Œå¹¶ä¿è¯è¿›ç¨‹æ°¸è¿œéƒ½æ´»ç€ï¼Œ0ç§’çš„é‡è½½ï¼Œ PM2æ˜¯å®Œç¾çš„ã€‚</strong></p>
<p><strong>pm2æ˜¯å¼€æºçš„åŸºäºNodejsçš„è¿›ç¨‹ç®¡ç†å™¨ï¼ŒåŒ…æ‹¬å®ˆæŠ¤è¿›ç¨‹ï¼Œç›‘æ§ï¼Œæ—¥å¿—çš„ä¸€æ•´å¥—å®Œæ•´çš„åŠŸèƒ½ï¼ŒåŸºæœ¬æ˜¯Nodejsåº”ç”¨ç¨‹åºä¸äºŒçš„å®ˆæŠ¤è¿›ç¨‹é€‰æ‹©ï¼Œäº‹å®ä¸Šå®ƒå¹¶ä¸ä»…ä»…å¯ä»¥å¯åŠ¨Nodejsçš„ç¨‹åºï¼Œåªè¦æ˜¯ä¸€èˆ¬çš„è„šæœ¬çš„ç¨‹åºå®ƒåŒæ ·å¯ä»¥èƒœä»»ã€‚</strong></p>
<h4 id="~-ä¸»è¦ç‰¹æ€§">~ã€ ä¸»è¦ç‰¹æ€§ï¼š</h4>
<p>å†…å»ºè´Ÿè½½å‡è¡¡ï¼ˆä½¿ç”¨Node cluster é›†ç¾¤æ¨¡å—ï¼‰<br>
åå°è¿è¡Œ<br>
0ç§’åœæœºé‡è½½ï¼ˆè¿™é¡¹åŠŸèƒ½å…è®¸ä½ é‡æ–°è½½å…¥ä»£ç è€Œä¸ç”¨å¤±å»è¯·æ±‚è¿æ¥ã€‚ï¼‰<br>
å…·æœ‰Ubuntuå’ŒCentOS çš„å¯åŠ¨è„šæœ¬<br>
åœæ­¢ä¸ç¨³å®šçš„è¿›ç¨‹ï¼ˆé¿å…æ— é™å¾ªç¯ï¼‰<br>
æ§åˆ¶å°æ£€æµ‹<br>
æä¾› HTTP API<br>
è¿œç¨‹æ§åˆ¶å’Œå®æ—¶çš„æ¥å£API ( Nodejs æ¨¡å—,å…è®¸å’ŒPM2è¿›ç¨‹ç®¡ç†å™¨äº¤äº’ )</p>
<h4 id="~-ä½¿ç”¨ç¯å¢ƒ">~ã€ ä½¿ç”¨ç¯å¢ƒï¼š</h4>
<p>ä»…èƒ½ç”¨äºwebåº”ç”¨<br>
è¿è¡ŒäºNode 0.11.xç‰ˆæœ¬<br>
è¿è¡Œäº cluster æ¨¡å¼ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰</p>
<h4 id="~-å®‰è£…">~ã€ å®‰è£…</h4>
<pre><code>npm install -g pm2
</code></pre>
<p>pm2å®‰è£…å¥½åï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸‹é¢ç›®å½•ï¼š</p>
<pre><code>/.pm2  
/.pm2/logs   
/.pm2/pids  
/.pm2/pm2.log 
/.pm2/pm2.pid 
/.pm2/rpc.sock 
/.pm2/pub.sock 
/.pm2/conf.js 
</code></pre>
<h4 id="~-ç”¨æ³•">~ã€ç”¨æ³•</h4>
<pre><code>npm install pm2 -g                   # å‘½ä»¤è¡Œå®‰è£… pm2 
pm2 start app.js -i 4                #åå°è¿è¡Œpm2ï¼Œå¯åŠ¨4ä¸ªapp.js 
                                               # ä¹Ÿå¯ä»¥æŠŠ'max' å‚æ•°ä¼ é€’ç»™ start
                                               # æ­£ç¡®çš„è¿›ç¨‹æ•°ç›®ä¾èµ–äºCpuçš„æ ¸å¿ƒæ•°ç›®
pm2 start app.js --name my-api # å‘½åè¿›ç¨‹
pm2 list                                 # æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çŠ¶æ€
pm2 monit                                # ç›‘è§†æ‰€æœ‰è¿›ç¨‹
pm2 logs                                 #  æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹æ—¥å¿—
pm2 stop all                             # åœæ­¢æ‰€æœ‰è¿›ç¨‹
pm2 restart all                          # é‡å¯æ‰€æœ‰è¿›ç¨‹
pm2 reload all                           # 0ç§’åœæœºé‡è½½è¿›ç¨‹ (ç”¨äº NETWORKED è¿›ç¨‹)
pm2 stop 0                               # åœæ­¢æŒ‡å®šçš„è¿›ç¨‹
pm2 restart 0                            # é‡å¯æŒ‡å®šçš„è¿›ç¨‹
pm2 startup                              # äº§ç”Ÿ init è„šæœ¬ ä¿æŒè¿›ç¨‹æ´»ç€
pm2 web                                  # è¿è¡Œå¥å£®çš„ computer API endpoint (http://localhost:9615)
pm2 delete 0                             # æ€æ­»æŒ‡å®šçš„è¿›ç¨‹
pm2 delete all                           # æ€æ­»å…¨éƒ¨è¿›ç¨‹
</code></pre>
<p>è¿è¡Œè¿›ç¨‹çš„ä¸åŒæ–¹å¼ï¼š</p>
<pre><code>$ pm2 start app.js -i max  # æ ¹æ®æœ‰æ•ˆCPUæ•°ç›®å¯åŠ¨æœ€å¤§è¿›ç¨‹æ•°ç›®
$ pm2 start app.js -i 3      # å¯åŠ¨3ä¸ªè¿›ç¨‹
$ pm2 start app.js -x        #ç”¨forkæ¨¡å¼å¯åŠ¨ app.js è€Œä¸æ˜¯ä½¿ç”¨ cluster
$ pm2 start app.js -x -- -a 23   # ç”¨forkæ¨¡å¼å¯åŠ¨ app.js å¹¶ä¸”ä¼ é€’å‚æ•° (-a 23)
$ pm2 start app.js --name serverone  # å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹å¹¶æŠŠå®ƒå‘½åä¸º serverone
$ pm2 stop serverone       # åœæ­¢ serverone è¿›ç¨‹
$ pm2 start app.json        # å¯åŠ¨è¿›ç¨‹, åœ¨ app.jsoné‡Œè®¾ç½®é€‰é¡¹
$ pm2 start app.js -i max -- -a 23                   #åœ¨--ä¹‹åç»™ app.js ä¼ é€’å‚æ•°
$ pm2 start app.js -i max -e err.log -o out.log  # å¯åŠ¨ å¹¶ ç”Ÿæˆä¸€ä¸ªé…ç½®æ–‡ä»¶
ä½ ä¹Ÿå¯ä»¥æ‰§è¡Œç”¨å…¶ä»–è¯­è¨€ç¼–å†™çš„app  ( fork æ¨¡å¼):
$ pm2 start my-bash-script.sh    -x --interpreter bash
$ pm2 start my-python-script.py -x --interpreter python
</code></pre>
<p><strong>pm2 list</strong><br>
åˆ—å‡ºç”±pm2ç®¡ç†çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯ï¼Œè¿˜ä¼šæ˜¾ç¤ºä¸€ä¸ªè¿›ç¨‹ä¼šè¢«å¯åŠ¨å¤šå°‘æ¬¡ï¼Œå› ä¸ºæ²¡å¤„ç†çš„å¼‚å¸¸ã€‚</p>
<p><strong>pm2 monit</strong><br>
ç›‘è§†æ¯ä¸ªnodeè¿›ç¨‹çš„CPUå’Œå†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚</p>
<h4 id="~-å…¥é—¨æ•™ç¨‹">~ã€å…¥é—¨æ•™ç¨‹</h4>
<p>æŒ‘æˆ‘ä»¬æœ€çˆ±çš„expressåº”ç”¨æ¥ä¸¾ä¾‹ã€‚ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡npm startå¯åŠ¨åº”ç”¨ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨node ./bin/wwwã€‚é‚£ä¹ˆï¼Œæ¢æˆpm2å°±æ˜¯</p>
<pre><code>pm2 start ./bin/www â€“watch
</code></pre>
<p>è¿™é‡Œç”¨äº†â€“watchå‚æ•°ï¼Œæ„å‘³ç€å½“ä½ çš„expressåº”ç”¨ä»£ç å‘ç”Ÿå˜åŒ–æ—¶ï¼Œpm2ä¼šå¸®ä½ é‡å¯æœåŠ¡ã€‚</p>
<h4 id="~-å‚æ•°è¯´æ˜">~ã€å‚æ•°è¯´æ˜ï¼š</h4>
<pre><code>--watchï¼šç›‘å¬åº”ç”¨ç›®å½•çš„å˜åŒ–ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œè‡ªåŠ¨é‡å¯ã€‚å¦‚æœè¦ç²¾ç¡®ç›‘å¬ã€ä¸è§å¬çš„ç›®å½•ï¼Œæœ€å¥½é€šè¿‡é…ç½®æ–‡ä»¶ã€‚
-i --instancesï¼šå¯ç”¨å¤šå°‘ä¸ªå®ä¾‹ï¼Œå¯ç”¨äºè´Ÿè½½å‡è¡¡ã€‚å¦‚æœ-i 0æˆ–è€…-i maxï¼Œåˆ™æ ¹æ®å½“å‰æœºå™¨æ ¸æ•°ç¡®å®šå®ä¾‹æ•°ç›®ã€‚
--ignore-watchï¼šæ’é™¤ç›‘å¬çš„ç›®å½•/æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ç‰¹å®šçš„æ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™ã€‚æ¯”å¦‚--ignore-watch=&quot;test node_modules &quot;some scripts&quot;&quot;
-n --nameï¼šåº”ç”¨çš„åç§°ã€‚æŸ¥çœ‹åº”ç”¨ä¿¡æ¯çš„æ—¶å€™å¯ä»¥ç”¨åˆ°ã€‚
-o --output &lt;path&gt;ï¼šæ ‡å‡†è¾“å‡ºæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ã€‚
-e --error &lt;path&gt;ï¼šé”™è¯¯è¾“å‡ºæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„ã€‚
--interpreter &lt;interpreter&gt;ï¼šthe interpreter pm2 should use for executing app (bash, python...)ã€‚æ¯”å¦‚ä½ ç”¨çš„coffee scriptæ¥ç¼–å†™åº”ç”¨ã€‚
</code></pre>
<p>å®Œæ•´å‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨ï¼š</p>
<pre><code>pm2 start app.js â€“watch -i 2  
</code></pre>
<p>**é…ç½®æ–‡ä»¶ **</p>
<p>é…ç½®æ–‡ä»¶é‡Œçš„è®¾ç½®é¡¹ï¼Œè·Ÿå‘½ä»¤è¡Œå‚æ•°åŸºæœ¬æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p>
<p>å¯ä»¥é€‰æ‹©jsæˆ–è€…jsonæ–‡ä»¶ï¼Œå°±çœ‹ä¸ªäººæ´—å¥½äº†ã€‚</p>
<p>jsonæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œpm2å½“ä½œæ™®é€šçš„jsæ–‡ä»¶æ¥å¤„ç†ï¼Œæ‰€ä»¥å¯ä»¥åœ¨é‡Œé¢æ·»åŠ æ³¨é‡Šæˆ–è€…ç¼–å†™ä»£ç ï¼Œè¿™å¯¹äºåŠ¨æ€è°ƒæ•´é…ç½®å¾ˆæœ‰å¥½å¤„ã€‚</p>
<p>å¦‚æœå¯åŠ¨çš„æ—¶å€™æŒ‡å®šäº†é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå‘½ä»¤è¡Œå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ï¼ˆä¸ªåˆ«å‚æ•°é™¤å¤–ï¼Œæ¯”å¦‚--envï¼‰<br>
ä¸¾ä¸ªç®€å•ä¾‹å­ï¼š</p>
<pre><code>{ 
    &quot;name&quot; : &quot;fis-receiver&quot;,                // åº”ç”¨åç§° 
    &quot;script&quot; : &quot;./bin/www&quot;,                 // å®é™…å¯åŠ¨è„šæœ¬ 
    &quot;cwd&quot; : &quot;./&quot;,                           // å½“å‰å·¥ä½œè·¯å¾„ 
    &quot;watch&quot;: [                              // ç›‘æ§å˜åŒ–çš„ç›®å½•ï¼Œä¸€æ—¦å˜åŒ–ï¼Œè‡ªåŠ¨é‡å¯ 
        &quot;bin&quot;, &quot;routers&quot; 
    ], 
    &quot;ignore_watch&quot; : [                      // ä»ç›‘æ§ç›®å½•ä¸­æ’é™¤ 
        &quot;node_modules&quot;, &quot;logs&quot;, &quot;public&quot;
    ], 
    &quot;watch_options&quot;: { 
        &quot;followSymlinks&quot;: false 
    }, 
    &quot;error_file&quot; : &quot;./logs/app-err.log&quot;,    // é”™è¯¯æ—¥å¿—è·¯å¾„ 
    &quot;out_file&quot; : &quot;./logs/app-out.log&quot;,      // æ™®é€šæ—¥å¿—è·¯å¾„ 
    &quot;env&quot;: { 
        &quot;NODE_ENV&quot;: &quot;production&quot;            // ç¯å¢ƒå˜é‡ï¼Œobjectç±»å‹ï¼Œå¦‚{&quot;NODE_ENV&quot;:&quot;production&quot;, &quot;ID&quot;: &quot;42&quot;}ï¼›
    },
    &quot;instances&quot; : &quot;max&quot;,                    // å¼€å¯è¿›ç¨‹æ•°ï¼Œå¯ä¸ºæ•°å€¼ï¼Œä¹Ÿå¯ä¸ºmaxã€‚ä¸æœåŠ¡å™¨cpuæ ¸æ•°ç›¸å…³ã€‚åº”ç”¨å¯åŠ¨å®ä¾‹ä¸ªæ•°ï¼Œä»…åœ¨clusteræ¨¡å¼æœ‰æ•ˆï¼Œé»˜è®¤ä¸ºforkï¼›
    &quot;exec_mode&quot; : &quot;cluster&quot;                 // åº”ç”¨å¯åŠ¨æ¨¡å¼ï¼Œæ”¯æŒforkå’Œclusteræ¨¡å¼ï¼›cluster(å¤šæ ¸æ¨è)
    &quot;min_uptime&quot;: &quot;60s&quot;,                    // åº”ç”¨è¿è¡Œå°‘äºæ—¶é—´è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸å¯åŠ¨ï¼›
    &quot;max_restarts&quot;: 30,                     // æœ€å¤§å¼‚å¸¸é‡å¯æ¬¡æ•°ï¼Œå³å°äºmin_uptimeè¿è¡Œæ—¶é—´é‡å¯æ¬¡æ•°ï¼›
    &quot;max_memory_restart&quot;: &quot;300M&quot;,           // æœ€å¤§å†…å­˜é™åˆ¶æ•°ï¼Œè¶…å‡ºè‡ªåŠ¨é‡å¯ï¼›
    &quot;autorestart&quot;: true,                    // é»˜è®¤ä¸ºtrue, å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹è‡ªåŠ¨é‡å¯ï¼›
}
</code></pre>
<p>pm2å¯åŠ¨æ–‡ä»¶ï¼Œ</p>
<pre><code>pm2 init
</code></pre>
<p>åˆ›å»ºä¸€ä¸ªecosystem.config.jsçš„ç¤ºä¾‹æ–‡ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code>module.exports =  {
  &quot;apps&quot;:[
    {
      &quot;name&quot;: &quot;test&quot;,
      &quot;cwd&quot;: &quot;/data/wwwroot/nodejs&quot;,
      &quot;script&quot;: &quot;./test.sh&quot;,
      &quot;exec_interpreter&quot;: &quot;bash&quot;,
      &quot;min_uptime&quot;: &quot;60s&quot;,
      &quot;max_restarts&quot;: 30,
      &quot;exec_mode&quot; : &quot;cluster_mode&quot;,
      &quot;error_file&quot; : &quot;./test-err.log&quot;,
      &quot;out_file&quot;: &quot;./test-out.log&quot;,
      &quot;pid_file&quot;: &quot;./test.pid&quot;
      &quot;watch&quot;: false
    }
]}
</code></pre>
<h4 id="~-å‚æ•°è¯´æ˜-2">~ã€å‚æ•°è¯´æ˜ï¼š</h4>
<p>appsï¼šjsonç»“æ„ï¼Œappsæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€ä¸ªæ•°ç»„æˆå‘˜å°±æ˜¯å¯¹åº”ä¸€ä¸ªpm2ä¸­è¿è¡Œçš„åº”ç”¨<br>
nameï¼šåº”ç”¨ç¨‹åºçš„åç§°<br>
cwdï¼šåº”ç”¨ç¨‹åºæ‰€åœ¨çš„ç›®å½•<br>
scriptï¼šåº”ç”¨ç¨‹åºçš„è„šæœ¬è·¯å¾„<br>
exec_interpreterï¼šåº”ç”¨ç¨‹åºçš„è„šæœ¬ç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨çš„shellï¼Œé»˜è®¤æ˜¯nodejs<br>
min_uptimeï¼šæœ€å°è¿è¡Œæ—¶é—´ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯60så³å¦‚æœåº”ç”¨ç¨‹åºåœ¨60så†…é€€å‡ºï¼Œpm2ä¼šè®¤ä¸ºç¨‹åºå¼‚å¸¸é€€å‡ºï¼Œæ­¤æ—¶è§¦å‘é‡å¯max_restartsè®¾ç½®æ•°é‡<br>
autorestart  é»˜è®¤ä¸ºtrue, å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹è‡ªåŠ¨é‡å¯ï¼›<br>
max_restartsï¼šè®¾ç½®åº”ç”¨ç¨‹åºå¼‚å¸¸é€€å‡ºé‡å¯çš„æ¬¡æ•°ï¼Œé»˜è®¤15æ¬¡ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰<br>
exec_modeï¼šåº”ç”¨ç¨‹åºå¯åŠ¨æ¨¡å¼ï¼Œè¿™é‡Œè®¾ç½®çš„æ˜¯clusterï¼ˆé›†ç¾¤ï¼‰ï¼Œé»˜è®¤æ˜¯fork<br>
error_fileï¼šè‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„é”™è¯¯æ—¥å¿—æ–‡ä»¶<br>
out_fileï¼šè‡ªå®šä¹‰åº”ç”¨ç¨‹åºæ—¥å¿—æ–‡ä»¶<br>
pid_fileï¼šè‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„pidæ–‡ä»¶<br>
watchï¼šæ˜¯å¦å¯ç”¨ç›‘æ§æ¨¡å¼ï¼Œé»˜è®¤æ˜¯falseã€‚å¦‚æœè®¾ç½®æˆtrueï¼Œå½“åº”ç”¨ç¨‹åºå˜åŠ¨æ—¶ï¼Œpm2ä¼šè‡ªåŠ¨é‡è½½ã€‚è¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®ä½ è¦ç›‘æ§çš„æ–‡ä»¶ã€‚<br>
max_memory_restartï¼šå½“å†…å­˜è¶…è¿‡è®¾ç½®çš„æ•°é‡æ—¶è‡ªåŠ¨é‡å¯ã€‚ å¦‚æœå·¥ç¨‹ä¸­æœ‰æ¯”è¾ƒæ£˜æ‰‹çš„å†…å­˜æ³„éœ²é—®é¢˜ï¼Œè¿™ä¸ªç®—æ˜¯ä¸€ä¸ªæŠ˜ä¸­æ–¹æ¡ˆã€‚<br>
instancesï¼š å¯ç”¨å¤šå°‘ä¸ªå®ä¾‹ï¼Œå¯ç”¨äºè´Ÿè½½å‡è¡¡ã€‚ä»…åœ¨clusteræ¨¡å¼æœ‰æ•ˆï¼Œé»˜è®¤ä¸ºforkï¼›<br>
cron_restart  crontabæ—¶é—´æ ¼å¼ï¼Œå®šæ—¶é‡å¯åº”ç”¨ï¼Œç›®å‰åªæ”¯æŒclusteræ¨¡å¼ï¼›<br>
è¿è¡Œå®ä¾‹ï¼šå·²ä¸Šé¢çš„test.jsonä¸ºä¾‹</p>
<p>pm2 start ecosystem.config.js</p>
<h4 id="~-ç¯å¢ƒåˆ‡æ¢">~ã€ç¯å¢ƒåˆ‡æ¢</h4>
<p>åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç»å¸¸éœ€è¦åœ¨å¤šä¸ªç¯å¢ƒä¸‹éƒ¨ç½²ï¼Œæ¯”å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç­‰ã€‚åœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæœ‰æ—¶å€™é…ç½®é¡¹ä¼šæœ‰å·®å¼‚ï¼Œæ¯”å¦‚é“¾æ¥çš„æ•°æ®åº“åœ°å€ä¸åŒç­‰ã€‚</p>
<p>å¯¹äºè¿™ç§åœºæ™¯ï¼Œpm2ä¹Ÿæ˜¯å¯ä»¥å¾ˆå¥½æ”¯æŒçš„ã€‚é¦–å…ˆé€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡env_xxæ¥å£°æ˜ä¸åŒç¯å¢ƒçš„é…ç½®ï¼Œç„¶ååœ¨å¯åŠ¨åº”ç”¨æ—¶ï¼Œé€šè¿‡â€“envå‚æ•°æŒ‡å®šè¿è¡Œçš„ç¯å¢ƒã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡envé€‰é¡¹å£°æ˜å¤šä¸ªç¯å¢ƒé…ç½®ã€‚ç®€å•è¯´æ˜ä¸‹ï¼š</p>
<p>envä¸ºé»˜è®¤çš„ç¯å¢ƒé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼Œenv_devã€env_teståˆ™åˆ†åˆ«æ˜¯å¼€å‘ã€æµ‹è¯•ç¯å¢ƒã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸åŒç¯å¢ƒä¸‹çš„NODE_ENVã€REMOTE_ADDRå­—æ®µçš„å€¼æ˜¯ä¸åŒçš„ã€‚<br>
åœ¨åº”ç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡process.env.REMOTE_ADDRç­‰æ¥è¯»å–é…ç½®ä¸­ç”Ÿå‘½çš„å˜é‡ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>&quot;env&quot;: { &quot;NODE_ENV&quot;: &quot;production&quot;,&quot;REMOTE_ADDR&quot;: &quot;http://www.example.com/&quot;}
&quot;env_dev&quot;: { &quot;NODE_ENV&quot;: &quot;development&quot;, &quot;REMOTE_ADDR&quot;: &quot;http://wdev.example.com/&quot;} 
â€‹&quot;env_test&quot;: { &quot;NODE_ENV&quot;: &quot;test&quot;, &quot;REMOTE_ADDR&quot;: &quot;http://wtest.example.com/&quot;}
</code></pre>
<p>å¯åŠ¨æŒ‡æ˜ç¯å¢ƒï¼šå‡è®¾é€šè¿‡ä¸‹é¢å¯åŠ¨è„šæœ¬ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼Œé‚£ä¹ˆï¼Œæ­¤æ—¶process.env.REMOTE_ADDRçš„å€¼å°±æ˜¯ç›¸åº”çš„é“¾æ¥åœ°å€</p>
<pre><code>pm2 start app.js --env dev
</code></pre>
<h4 id="~-è´Ÿè½½å‡è¡¡">~ã€è´Ÿè½½å‡è¡¡</h4>
<p>å‘½ä»¤å¦‚ä¸‹ï¼Œè¡¨ç¤ºå¼€å¯ä¸‰ä¸ªè¿›ç¨‹ã€‚å¦‚æœ-i 0ï¼Œåˆ™ä¼šæ ¹æ®æœºå™¨å½“å‰æ ¸æ•°è‡ªåŠ¨å¼€å¯å°½å¯èƒ½å¤šçš„è¿›ç¨‹ã€‚</p>
<pre><code>m2 start app.js -i 3 # å¼€å¯ä¸‰ä¸ªè¿›ç¨‹  
</code></pre>
<pre><code>â€‹pm2 start app.js -i max # æ ¹æ®æœºå™¨CPUæ ¸æ•°ï¼Œå¼€å¯å¯¹åº”æ•°ç›®çš„è¿›ç¨‹ 
</code></pre>
<p><strong>æ—¥å¿—æŸ¥çœ‹</strong></p>
<p>é™¤äº†å¯ä»¥æ‰“å¼€æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹æ—¥å¿—å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡pm2 logsæ¥æŸ¥çœ‹å®æ—¶æ—¥å¿—ã€‚è¿™ç‚¹å¯¹äºçº¿ä¸Šé—®é¢˜æ’æŸ¥éå¸¸é‡è¦ã€‚</p>
<p>æ¯”å¦‚æŸä¸ªnodeæœåŠ¡çªç„¶å¼‚å¸¸é‡å¯äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡pm2æä¾›çš„æ—¥å¿—å·¥å…·æ¥æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼Œçœ‹æ˜¯ä¸æ˜¯è„šæœ¬å‡ºé”™ä¹‹ç±»å¯¼è‡´çš„å¼‚å¸¸é‡å¯ã€‚</p>
<pre><code>pm2 logs  
</code></pre>
<h4 id="~-å¼€æœºè‡ªåŠ¨å¯åŠ¨">~ã€å¼€æœºè‡ªåŠ¨å¯åŠ¨</h4>
<p>å¯ä»¥é€šè¿‡pm2 startupæ¥å®ç°å¼€æœºè‡ªå¯åŠ¨ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<p>é€šè¿‡pm2 saveä¿å­˜å½“å‰è¿›ç¨‹çŠ¶æ€ã€‚</p>
<p>é€šè¿‡pm2 startup [platform]ç”Ÿæˆå¼€æœºè‡ªå¯åŠ¨çš„å‘½ä»¤ã€‚ï¼ˆè®°å¾—æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼‰</p>
<p>å°†æ­¥éª¤2ç”Ÿæˆçš„å‘½ä»¤ï¼Œç²˜è´´åˆ°æ§åˆ¶å°è¿›è¡Œï¼Œæå®šã€‚</p>
<p>è‡ªåŠ¨é‡å¯åº”ç”¨</p>
<p>forkä¸æ”¯æŒå®šæ—¶é‡å¯ï¼Œclusteræ”¯æŒå®šæ—¶é‡å¯ã€‚å®šæ—¶é‡å¯ä¹Ÿå°±æ˜¯é…ç½®ä¸­çš„cron_restarté…ç½®é¡¹ã€‚</p>
<h4 id="~-ç›‘æ§monitor">~ã€ç›‘æ§(monitor)</h4>
<p>è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰é€šè¿‡pm2è¿è¡Œçš„è¿›ç¨‹çš„çŠ¶æ€ã€‚</p>
<pre><code>pm2 monit
</code></pre>
<p>å†…å­˜ä½¿ç”¨è¶…è¿‡ä¸Šé™è‡ªåŠ¨é‡å¯</p>
<p>å¦‚æœæƒ³è¦ä½ çš„åº”ç”¨ï¼Œåœ¨è¶…è¿‡ä½¿ç”¨å†…å­˜ä¸Šé™åè‡ªåŠ¨é‡å¯ï¼Œé‚£ä¹ˆå¯ä»¥åŠ ä¸Šâ€“max-memory-restartå‚æ•°ã€‚ï¼ˆæœ‰å¯¹åº”çš„é…ç½®é¡¹ï¼‰</p>
<pre><code>pm2 start big-array.js â€“max-memory-restart 20M     
</code></pre>
<p>å¦‚æœä½ ä¸ä»…ä»…æƒ³ç›‘æ§è¢«pm2ç®¡ç†çš„è¿›ç¨‹ï¼Œè¿˜éœ€è¦ç›‘æ§è¿›ç¨‹æ‰€è¿è¡Œçš„æœºå™¨çš„ä¿¡æ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªAPIã€‚</p>
<pre><code>pm2 web  
</code></pre>
<p>pm2ä¼šå¯åŠ¨ä¸€ä¸ªå«åšpm2-http-interfaceçš„è¿›ç¨‹æä¾›webæœåŠ¡ã€‚ä½ æ‰“å¼€æµè§ˆå™¨è¾“å…¥  httpï¼š//127.0.0.1:9615ï¼Œæ˜¯ä¸æ˜¯è¢«çœ‹åˆ°çš„ç»“æœæƒŠè‰³åˆ°äº†ã€‚</p>
<h4 id="~-ç¨³å®šè¿è¡Œå»ºè®®">~ã€ç¨³å®šè¿è¡Œå»ºè®®</h4>
<p><strong>PM2æ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„Nodeè¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œå®ƒæœ‰ç€ä¸°å¯Œçš„ç‰¹æ€§ï¼šèƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šæ ¸CPUä¸”èƒ½å¤Ÿè´Ÿè½½å‡è¡¡ã€èƒ½å¤Ÿå¸®åŠ©åº”ç”¨åœ¨å´©æºƒåã€æŒ‡å®šæ—¶é—´(cluster model)å’Œè¶…å‡ºæœ€å¤§å†…å­˜é™åˆ¶ç­‰æƒ…å†µä¸‹å®ç°è‡ªåŠ¨é‡å¯ã€‚</strong></p>
<blockquote>
<p><strong>ä¸ªäººå‡ ç‚¹çœ‹æ³•ä¿è¯å¸¸é©»åº”ç”¨è¿›ç¨‹ç¨³å®šè¿è¡Œï¼š</strong><br>
<strong>å®šæ—¶é‡å¯ï¼Œåº”ç”¨è¿›ç¨‹è¿è¡Œæ—¶é—´ä¹…äº†æˆ–è®¸æ€»ä¼šäº§ç”Ÿä¸€äº›æ„æ–™ä¹‹å¤–çš„é—®é¢˜ï¼Œå®šæ—¶å¯ä»¥è§„é¿ä¸€äº›ä¸å¯æµ‹çš„æƒ…å†µï¼›</strong><br>
<strong>æœ€å¤§å†…å­˜é™åˆ¶ï¼Œæ ¹æ®è§‚å¯Ÿè®¾å®šåˆç†å†…å­˜é™åˆ¶ï¼Œä¿è¯åº”ç”¨å¼‚å¸¸è¿è¡Œï¼›</strong><br>
<strong>åˆç†min_uptimeï¼Œmin_uptimeæ˜¯åº”ç”¨æ­£å¸¸å¯åŠ¨çš„æœ€å°æŒç»­è¿è¡Œæ—¶é•¿ï¼Œè¶…å‡ºæ­¤æ—¶é—´åˆ™è¢«åˆ¤å®šä¸ºå¼‚å¸¸å¯åŠ¨ï¼›</strong><br>
<strong>è®¾å®šå¼‚å¸¸é‡å¯å»¶æ—¶restart_delayï¼Œå¯¹äºå¼‚å¸¸æƒ…å†µå¯¼è‡´åº”ç”¨åœæ­¢ï¼Œè®¾å®šå¼‚å¸¸é‡å¯å»¶è¿Ÿå¯é˜²æ­¢åº”ç”¨åœ¨ä¸å¯æµ‹æƒ…å†µä¸‹ä¸æ–­é‡å¯çš„å¯¼è‡´é‡å¯æ¬¡æ•°è¿‡å¤šç­‰é—®é¢˜ï¼›</strong><br>
<strong>è®¾ç½®å¼‚å¸¸é‡å¯æ¬¡æ•°ï¼Œå¦‚æœåº”ç”¨ä¸æ–­å¼‚å¸¸é‡å¯ï¼Œå¹¶è¶…è¿‡ä¸€å®šçš„é™åˆ¶æ¬¡æ•°ï¼Œè¯´æ˜æ­¤æ—¶çš„ç¯å¢ƒé•¿æ—¶é—´å¤„äºä¸å¯æ§çŠ¶æ€ï¼ŒæœåŠ¡å™¨å¼‚å¸¸ã€‚æ­¤æ—¶ä¾¿å¯åœæ­¢å°è¯•ï¼Œå‘å‡ºé”™è¯¯è­¦å‘Šé€šçŸ¥ç­‰ã€‚</strong></p>
</blockquote>

                        </div>
                        
                            <div class="post-toc">
                                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#~-%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7">~ã€ ä¸»è¦ç‰¹æ€§ï¼š</a></li>
<li><a href="#~-%E4%BD%BF%E7%94%A8%E7%8E%AF%E5%A2%83">~ã€ ä½¿ç”¨ç¯å¢ƒï¼š</a></li>
<li><a href="#~-%E5%AE%89%E8%A3%85">~ã€ å®‰è£…</a></li>
<li><a href="#~-%E7%94%A8%E6%B3%95">~ã€ç”¨æ³•</a></li>
<li><a href="#~-%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B">~ã€å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="#~-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E">~ã€å‚æ•°è¯´æ˜ï¼š</a></li>
<li><a href="#~-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E-2">~ã€å‚æ•°è¯´æ˜ï¼š</a></li>
<li><a href="#~-%E7%8E%AF%E5%A2%83%E5%88%87%E6%8D%A2">~ã€ç¯å¢ƒåˆ‡æ¢</a></li>
<li><a href="#~-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">~ã€è´Ÿè½½å‡è¡¡</a></li>
<li><a href="#~-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8">~ã€å¼€æœºè‡ªåŠ¨å¯åŠ¨</a></li>
<li><a href="#~-%E7%9B%91%E6%8E%A7monitor">~ã€ç›‘æ§(monitor)</a></li>
<li><a href="#~-%E7%A8%B3%E5%AE%9A%E8%BF%90%E8%A1%8C%E5%BB%BA%E8%AE%AE">~ã€ç¨³å®šè¿è¡Œå»ºè®®</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

                            </div>
                            
                                
                                    
                                            <!--zh-->
                                            <section class="post-copyright zh">
                                                <p class="copyright-item ">
                                                    <span>&#x4F5C;&#x8005;:</span>
                                                    <span>ğŸ³å°å’¸é±¼-è‡ªå·±çš„å¿ƒæƒ…</span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x6C38;&#x4E45;&#x94FE;&#x63A5;:</span>
                                                    <span><a href="https://lingtin.github.io/post/mzEtFKB0d/">https://lingtin.github.io/post/mzEtFKB0d/</a></span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x534F;&#x8BAE;:</span>
                                                    <span>MIT License</span>
                                                </p>
                                            </section>
                                            
                                                
                                                    
                                                                    <!--Share-->
                                                                    <span style="margin-right:15px">
                        <i class="post-share"></i>
                        <span>&#x5206;&#x4EAB;:</span>
                                                                    <a title="QR ç " target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://lingtin.github.io/post/mzEtFKB0d/"><i class="fa fa-qrcode"></i></a>
                                                                    <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://lingtin.github.io/post/mzEtFKB0d/&sharesource=qzone&title=NodeJSè¿›ç¨‹ç®¡ç†å™¨pm2&pics=https://lingtin.github.io/images/avatar.png?v=1597977814576&summary="><i class="fa fa-qq"></i></a>
                                                                    <a title="æ–°æµªå¾®åš" target="_blank" href="https://service.weibo.com/share/share.php?url=https://lingtin.github.io/post/mzEtFKB0d/&sharesource=weibo&title=NodeJSè¿›ç¨‹ç®¡ç†å™¨pm2 + " - " + &pic="https://lingtin.github.io/images/avatar.png?v=1597977814576 "><i class="fa fa-weibo "></i></a>

                                                                    </span>
                                                                    
                                                                            <!--zh-->
                                                                            <section class="post-tags zh ">
                                                                                <div>
                                                                                    <span>&#x6807;&#x7B7E;:</span>
                                                                                    <span class="tag ">
                        
                        
                        <a href="https://lingtin.github.io/tag/2PLgaq7l7/">#
                    nodejs
                        </a>
                        
                        <a href="https://lingtin.github.io/tag/xd5TVJ9ej/">#
                    contos
                        </a>
                        
                            
                                </span>
                                                                                </div>
                                                                                <div>
                                                                                    <a href="javascript:window.history.back();">
                        &#x8FD4;&#x56DE;</a>
                                                                                    <span>&dot;</span>
                                                                                    <a href="#">&#x4E3B;&#x9875;</a>
                                                                                </div>
                                                                            </section>

                                                                            
                                                                                <!---->
                                                                                <section class="post-nav">
                                                                                    
                                                                                        <a class="prev" rel="prev" href="https://lingtin.github.io/post/dwFY5Qi4D/">
                                                                                            NPM Scripts æŒ‡å—
                                                                                        </a>
                                                                                        
                                                                                            
                                                                                                <a class="next" rel="next" href="https://lingtin.github.io/post/Mwak-ivNk/">
                                                                                                    Nuxt+PM2éƒ¨ç½²ï¼Œä½¿ç”¨ecosystem.configå¯åŠ¨ä¸å¼€å‘ç»éªŒ
                                                                                                </a>
                                                                                                
                                                                                </section>
                    </article>
                </div>
                
                    
                        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container" style="width: 100%;max-width: 780px;margin: auto;"></div>

<script>
    var gitalk = new Gitalk({
        clientID: '94bde96397c34f9c1527',
        clientSecret: '7da1c7e312aa9ab8537ef1b00e9856060cb78a01',
        repo: 'lingtin.github.io',
        owner: 'Lingtin',
        admin: ['Lingtin'],
        id: (location.pathname).substring(0, 49), // Ensure uniqueness and length less than 50
        distractionFreeMode: false // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
</script>
                            
                                        
                                            
            </div>
    </div>
    </div>
    </div>
    
    <div id="player"></div>
    
        <footer id="footer" class="footer">
            <div class="copyright">
                
                        
                            
                                <b id="hitokoto"></b><br>
                                
                                    <div style="width:300px;margin:0 auto; padding:0px 0;">
                                        <a target="_blank" href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=18000511" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;">
                                            <img src="https://yanxuan.nosdn.127.net/b610ced5ac6a0e25cf6edf5606c69775.png" style="float:left;">
                                            <p id="icpinfo" style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;"></p>
                                        </a>
                                    </div>
                                    
                                        <svg viewBox="0 0 1024 1024" style="margin-left: 5px;margin-right: 5px;" version="1.0" width="8" height="8" class="my-face">
            <path
                d="M863.597631 513.574282l-271.33965-140.213484L729.783667 81.926656c3.583731-7.87141 7.167462-15.742819 7.167462-25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0-39.293053 12.607055c-1.791866 1.59988-3.519736 3.19976-5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0-19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c-12.479064 25.214109-1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591-4.735645 44.604655-15.742819l480.091993-403.297753a55.547834 55.547834 0 0 0 19.646526-47.228458 61.243407 61.243407 0 0 0-32.12559-44.156688z"
                fill="#93b5cf"></path>
        </svg>
                                        ğŸ³å°å’¸é±¼-è‡ªå·±çš„å¿ƒæƒ… &copy;Copyright
                                            <script>
                                                var date = new Date();
                                                document.write("" + date.getFullYear());
                                            </script>
                                            | Powered by
                                            <a href="" target="_blank">
                                                
                                            </a>
            </div>
            <div id="update" style="display:none;">
                off
            </div>
            
                    <script>
                        var port = '';
                        
                        document.write('<div id="home_path" style="display:none;">' + document.location.protocol + '//' + window.document.location.hostname + port + '</div>')
                    </script>
        </footer>
        
                <script>
                    

                    function LoadPlayer() {
                        var musicList = [];
                        
                        musicList.push({
                            name: 'æ¬§é˜³å¨œå¨œ ä¸€å¿ƒä¸€å¿µ',
                            url: 'http://music.163.com/song/media/outer/url?id=1422745957.mp3',
                            artist: 'æ¬§é˜³å¨œå¨œï¼Œå´æ–Œï¼Œæ—é‡‡æ¬£',
                            cover: 'http://p1.music.126.net/PR_7urv106ELtN95gkiGUg==/109951164719542740.jpg?param=130y130',
                        });
                        
                        console.log(" MusicList: " + musicList);
                        
                        const ap = new APlayer({
                            container: document.getElementById('player'),
                            audio: musicList
                        });
                        
                    }
                    LoadPlayer();
                    
                    
                    
                    hitokoto();
                    
                    var icp = document.getElementById('icpinfo');
                    icp.innerText = "é™•ICPå¤‡18000511å·-1";
                    
                    getStar();
                    hljs.initHighlighting();
                    console.clear();
                    
                    var newDate = new Date();
                    newDate.setTime(1597977814576);
                    console.log(" Blog Update Time: " + newDate.toLocaleDateString());
                    console.log("\n %c \u26a1Theme:Chic Author's Blog:https://blog.itjoker.cn  Write By ITJoker  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;");
                </script>
        </div>
</body>
<script>
    scroll();
</script>

</html>